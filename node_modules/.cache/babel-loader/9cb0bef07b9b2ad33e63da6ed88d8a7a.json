{"ast":null,"code":"import axios from 'axios';\nexport default {\n  created() {\n    if (!localStorage.getItem('token')) {\n      this.$router.push('/');\n    }\n  },\n\n  methods: {\n    async create() {\n      let headers = {\n        \"Authorization\": `Bearer ${localStorage.getItem('token')}`\n      };\n\n      try {\n        const {\n          data\n        } = await axios.post(`${process.env.VUE_APP_BASE_API}/tasks/`, this.task, {\n          headers: headers\n        });\n\n        if (data?.status || false) {\n          this.$swal('success', data.message, 'success');\n          this.$router.push('/tasks');\n        } else {\n          this.$swal('oops!', 'something went wrong! try again!!', 'error');\n        }\n      } catch (e) {\n        if (e.response.status == 401) {\n          localStorage.removeItem('token');\n          this.$router.push('/');\n        } else if (e.response.status == 422) {\n          let data = e.response.data;\n\n          if (data.errors?.name || false) {\n            this.errors.name = data.errors.name[0];\n          } else {\n            this.errors.name = '';\n          }\n        }\n      }\n    }\n\n  },\n\n  data() {\n    return {\n      task: {\n        name: ''\n      },\n      errors: {\n        name: ''\n      }\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAeA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAe;EACbC,OAAO,GAAG;IACR,IAAI,CAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAL,EAAoC;MAClC,KAAKC,OAAL,CAAaC,IAAb,CAAkB,GAAlB;IACF;EACD,CALY;;EAMbC,OAAO,EAAE;IACP,MAAMC,MAAN,GAAe;MACX,IAAIC,OAAM,GAAI;QAAC,iBAAmB,UAASN,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;MAA3D,CAAd;;MACF,IAAI;QACF,MAAM;UAACM;QAAD,IAAS,MAAMT,KAAK,CAACU,IAAN,CAAY,GAAEC,OAAO,CAACC,GAAR,CAAYC,gBAAiB,SAA3C,EAAqD,KAAKC,IAA1D,EAAgE;UAACN,OAAO,EAAEA;QAAV,CAAhE,CAArB;;QACA,IAAIC,IAAI,EAAEM,MAAN,IAAgB,KAApB,EAA2B;UACzB,KAAKC,KAAL,CAAW,SAAX,EAAsBP,IAAI,CAACQ,OAA3B,EAAoC,SAApC;UACA,KAAKb,OAAL,CAAaC,IAAb,CAAkB,QAAlB;QACF,CAHA,MAGO;UACL,KAAKW,KAAL,CAAW,OAAX,EAAoB,mCAApB,EAAyD,OAAzD;QACF;MACF,CARA,CAQE,OAAME,CAAN,EAAS;QACT,IAAIA,CAAC,CAACC,QAAF,CAAWJ,MAAX,IAAqB,GAAzB,EAA8B;UAC5Bb,YAAY,CAACkB,UAAb,CAAwB,OAAxB;UACA,KAAKhB,OAAL,CAAaC,IAAb,CAAkB,GAAlB;QACF,CAHA,MAGO,IAAGa,CAAC,CAACC,QAAF,CAAWJ,MAAX,IAAqB,GAAxB,EAA6B;UAChC,IAAIN,IAAG,GAAIS,CAAC,CAACC,QAAF,CAAWV,IAAtB;;UACA,IAAIA,IAAI,CAACY,MAAL,EAAaC,IAAb,IAAqB,KAAzB,EAAgC;YAC5B,KAAKD,MAAL,CAAYC,IAAZ,GAAmBb,IAAI,CAACY,MAAL,CAAYC,IAAZ,CAAiB,CAAjB,CAAnB;UACJ,CAFA,MAEO;YACH,KAAKD,MAAL,CAAYC,IAAZ,GAAmB,EAAnB;UACJ;QACJ;MAEF;IACD;;EAzBM,CANI;;EAiCbb,IAAI,GAAG;IACL,OAAO;MACLK,IAAI,EAAE;QACFQ,IAAI,EAAE;MADJ,CADD;MAILD,MAAM,EAAE;QACJC,IAAI,EAAE;MADF;IAJH,CAAP;EAQD;;AA1CY,CAAf","names":["axios","created","localStorage","getItem","$router","push","methods","create","headers","data","post","process","env","VUE_APP_BASE_API","task","status","$swal","message","e","response","removeItem","errors","name"],"sourceRoot":"","sources":["/Users/sairamvaddireddy/Documents/Sites/vue-todo/src/views/Tasks/todo-add.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>Add Task</h1>\n    <form class=\"w-25 m-auto\" @submit.prevent=\"create\">\n        <div class=\"form-group\">\n            <label for=\"name\">Name</label>\n            <input type=\"text\" class=\"form-control\" id=\"name\" v-model=\"task.name\" placeholder=\"Enter name\" :class=\"{'is-invalid' : errors.name}\">\n            <span class=\"invalid-feedback\">{{ errors.name }}</span>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary mt-3\">Create</button>\n    </form>\n    <button @click=\"$router.back()\" class=\"btn btn-secondary mt-3\">Cancel</button>\n  </div>\n</template>\n<script>\nimport axios from 'axios';\nexport default {\n  created() {\n    if (!localStorage.getItem('token')) {\n      this.$router.push('/');\n    }\n  },\n  methods: {\n    async create() {\n        let headers = {\"Authorization\" : `Bearer ${localStorage.getItem('token')}`};\n      try {\n        const {data} = await axios.post(`${process.env.VUE_APP_BASE_API}/tasks/`, this.task, {headers: headers});\n        if (data?.status || false) {\n          this.$swal('success', data.message, 'success');\n          this.$router.push('/tasks');\n        } else {\n          this.$swal('oops!', 'something went wrong! try again!!', 'error');\n        }\n      } catch(e) {\n        if (e.response.status == 401) {\n          localStorage.removeItem('token');\n          this.$router.push('/');\n        } else if(e.response.status == 422) {\n            let data = e.response.data;\n            if (data.errors?.name || false) {\n                this.errors.name = data.errors.name[0];\n            } else {\n                this.errors.name = '';\n            }\n        }\n\n      }\n    },\n  },\n  data() {\n    return {\n      task: {\n          name: ''\n      },\n      errors: {\n          name: ''\n      }\n    }\n  },\n\n\n}\n</script>"]},"metadata":{},"sourceType":"module"}