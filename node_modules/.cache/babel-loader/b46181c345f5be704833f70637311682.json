{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'TodoHome',\n\n  created() {\n    if (localStorage.getItem('token')) {\n      this.$router.push('/tasks');\n    }\n  },\n\n  data() {\n    return {\n      'email': '',\n      'password': '',\n      'errors': {\n        'email': '',\n        'password': ''\n      }\n    };\n  },\n\n  methods: {\n    async login() {\n      this.validate();\n\n      try {\n        const {\n          data\n        } = await axios.post(`${process.env.VUE_APP_BASE_API}/login`, {\n          'email': this.email,\n          'password': this.password\n        });\n\n        if (data.status) {\n          localStorage.setItem('token', data.token);\n          this.$router.push('/tasks');\n        }\n\n        if (data.errors?.email || false) {\n          this.errors.email = data.errors.email[0];\n        }\n\n        if (data.errors?.password || false) {\n          this.errors.password = data.errors.password[0];\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    },\n\n    validate() {\n      if (!this.email) {\n        this.errors.email = 'Email is required';\n      } else {\n        this.errors.email = '';\n      }\n\n      if (!this.password) {\n        this.errors.password = 'Password is required';\n      } else {\n        this.errors.password = '';\n      }\n\n      return;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAqBA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe;EACbC,IAAI,EAAE,UADO;;EAEbC,OAAO,GAAG;IACR,IAAIC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;MACjC,KAAKC,OAAL,CAAaC,IAAb,CAAkB,QAAlB;IACF;EACD,CANY;;EAObC,IAAI,GAAG;IACL,OAAO;MACL,SAAS,EADJ;MAEL,YAAY,EAFP;MAGL,UAAU;QACR,SAAS,EADD;QAER,YAAa;MAFL;IAHL,CAAP;EAQD,CAhBY;;EAiBbC,OAAO,EAAE;IACP,MAAMC,KAAN,GAAc;MACZ,KAAKC,QAAL;;MACA,IAAI;QACF,MAAM;UAACH;QAAD,IAAS,MAAMP,KAAK,CAACW,IAAN,CAAY,GAAEC,OAAO,CAACC,GAAR,CAAYC,gBAAiB,QAA3C,EAAoD;UAAC,SAAS,KAAKC,KAAf;UAAsB,YAAY,KAAKC;QAAvC,CAApD,CAArB;;QACA,IAAIT,IAAI,CAACU,MAAT,EAAiB;UACfd,YAAY,CAACe,OAAb,CAAqB,OAArB,EAA8BX,IAAI,CAACY,KAAnC;UACA,KAAKd,OAAL,CAAaC,IAAb,CAAkB,QAAlB;QACF;;QACA,IAAIC,IAAI,CAACa,MAAL,EAAaL,KAAb,IAAsB,KAA1B,EAAiC;UAC/B,KAAKK,MAAL,CAAYL,KAAZ,GAAoBR,IAAI,CAACa,MAAL,CAAYL,KAAZ,CAAkB,CAAlB,CAApB;QACF;;QACA,IAAIR,IAAI,CAACa,MAAL,EAAaJ,QAAb,IAAyB,KAA7B,EAAoC;UAClC,KAAKI,MAAL,CAAYJ,QAAZ,GAAuBT,IAAI,CAACa,MAAL,CAAYJ,QAAZ,CAAqB,CAArB,CAAvB;QACF;MACF,CAZA,CAYE,OAAMK,CAAN,EAAS;QACTC,OAAO,CAACC,GAAR,CAAYF,CAAZ;MACF;IACD,CAlBM;;IAmBPX,QAAQ,GAAG;MACT,IAAI,CAAC,KAAKK,KAAV,EAAiB;QACf,KAAKK,MAAL,CAAYL,KAAZ,GAAoB,mBAApB;MACF,CAFA,MAEO;QACL,KAAKK,MAAL,CAAYL,KAAZ,GAAoB,EAApB;MACF;;MACA,IAAI,CAAC,KAAKC,QAAV,EAAoB;QAClB,KAAKI,MAAL,CAAYJ,QAAZ,GAAuB,sBAAvB;MACF,CAFA,MAEO;QACL,KAAKI,MAAL,CAAYJ,QAAZ,GAAuB,EAAvB;MACF;;MACA;IACF;;EA/BO;AAjBI,CAAf","names":["axios","name","created","localStorage","getItem","$router","push","data","methods","login","validate","post","process","env","VUE_APP_BASE_API","email","password","status","setItem","token","errors","e","console","log"],"sourceRoot":"","sources":["/Users/sairamvaddireddy/Documents/Sites/vue-todo/src/views/todo-home.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n    <h1>Login</h1>\n      <form class=\"w-25 m-auto\" @submit.prevent=\"login\">\n        <div class=\"form-group\">\n          <label for=\"email\">Email address</label>\n          <input type=\"email\" class=\"form-control\" id=\"email\" v-model=\"email\" placeholder=\"Enter email\" :class=\"{'is-invalid' : errors.email}\">\n          <span class=\"invalid-feedback\">{{ errors.email }}</span>\n        </div>\n        <div class=\"form-group\">\n          <label for=\"password\">Password</label>\n          <input type=\"password\" class=\"form-control\" id=\"password\" v-model=\"password\" placeholder=\"Password\" :class=\"{'is-invalid' : errors.password}\">\n          <span class=\"invalid-feedback\">{{ errors.password }}</span>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary mt-3\">Submit</button>\n      </form>\n      <router-link :to=\"{ name: 'Register' }\" class=\"mt-6\">Click Here To Register</router-link>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'TodoHome',\n  created() {\n    if (localStorage.getItem('token')) {\n      this.$router.push('/tasks');\n    }\n  },\n  data() {\n    return {\n      'email': '',\n      'password': '',\n      'errors': {\n        'email': '',\n        'password' : ''\n      }\n    }\n  },\n  methods: {\n    async login() {\n      this.validate();\n      try {\n        const {data} = await axios.post(`${process.env.VUE_APP_BASE_API}/login`, {'email': this.email, 'password': this.password});\n        if (data.status) {\n          localStorage.setItem('token', data.token);\n          this.$router.push('/tasks');\n        }\n        if (data.errors?.email || false) {\n          this.errors.email = data.errors.email[0];\n        }\n        if (data.errors?.password || false) {\n          this.errors.password = data.errors.password[0];\n        }\n      } catch(e) {\n        console.log(e);\n      }\n    },\n    validate() {\n      if (!this.email) {\n        this.errors.email = 'Email is required';\n      } else {\n        this.errors.email = '';\n      }\n      if (!this.password) {\n        this.errors.password = 'Password is required';\n      } else {\n        this.errors.password = '';\n      }\n      return;\n    }\n  }\n}\n\n</script>\n"]},"metadata":{},"sourceType":"module"}