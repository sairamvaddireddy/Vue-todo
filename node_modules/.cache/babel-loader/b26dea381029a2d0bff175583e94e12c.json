{"ast":null,"code":"import axios from 'axios';\nexport default {\n  created() {\n    if (!localStorage.getItem('token')) {\n      this.$router.push('/');\n    }\n  },\n\n  mounted() {\n    this.fetchData();\n  },\n\n  methods: {\n    async fetchData() {\n      try {\n        const {\n          data\n        } = await axios.get(`${process.env.VUE_APP_BASE_API}/tasks`, {\n          headers: {\n            \"Authorization\": `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        this.tasks = data.tasks.data;\n      } catch (e) {\n        if (e.response.status == 401) {\n          localStorage.removeItem('token');\n          this.$router.push('/');\n        }\n      }\n    },\n\n    async deleteTask(id) {\n      try {\n        const {\n          data\n        } = await axios.delete(`${process.env.VUE_APP_BASE_API}/tasks/${id}`, {\n          headers: {\n            \"Authorization\": `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n\n        if (data.status) {\n          this.$swal('success', data.message, 'success');\n          this.fetchData();\n        } else {\n          this.$swal('oops!', 'something went wrong! try again!!', 'error');\n        }\n      } catch (e) {\n        if (e.response.status == 401) {\n          localStorage.removeItem('token');\n          this.$router.push('/');\n        }\n      }\n    },\n\n    async editTask(id) {\n      this.$router.push({\n        name: 'editTask',\n        params: {\n          id: id\n        }\n      });\n    },\n\n    add() {\n      this.$router.push({\n        name: 'addTask'\n      });\n    }\n\n  },\n\n  data() {\n    return {\n      tasks: {}\n    };\n  }\n\n};","map":{"version":3,"mappings":"AA0BA,OAAOA,KAAP,MAAkB,OAAlB;AACA,eAAe;EACbC,OAAO,GAAG;IACR,IAAI,CAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAL,EAAoC;MAClC,KAAKC,OAAL,CAAaC,IAAb,CAAkB,GAAlB;IACF;EACD,CALY;;EAMbC,OAAO,GAAG;IACR,KAAKC,SAAL;EACD,CARY;;EASbC,OAAO,EAAE;IACP,MAAMD,SAAN,GAAkB;MAChB,IAAI;QACF,MAAM;UAACE;QAAD,IAAS,MAAMT,KAAK,CAACU,GAAN,CAAW,GAAEC,OAAO,CAACC,GAAR,CAAYC,gBAAiB,QAA1C,EAAmD;UAAEC,OAAO,EAAE;YAAC,iBAAmB,UAASZ,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;UAA3D;QAAX,CAAnD,CAArB;QACA,KAAKY,KAAL,GAAaN,IAAI,CAACM,KAAL,CAAWN,IAAxB;MACF,CAHA,CAGE,OAAMO,CAAN,EAAS;QACT,IAAIA,CAAC,CAACC,QAAF,CAAWC,MAAX,IAAqB,GAAzB,EAA8B;UAC5BhB,YAAY,CAACiB,UAAb,CAAwB,OAAxB;UACA,KAAKf,OAAL,CAAaC,IAAb,CAAkB,GAAlB;QACF;MACF;IACD,CAXM;;IAYP,MAAMe,UAAN,CAAiBC,EAAjB,EAAqB;MACnB,IAAI;QACF,MAAM;UAACZ;QAAD,IAAS,MAAMT,KAAK,CAACsB,MAAN,CAAc,GAAEX,OAAO,CAACC,GAAR,CAAYC,gBAAiB,UAASQ,EAAG,EAAzD,EAA4D;UAAEP,OAAO,EAAE;YAAC,iBAAmB,UAASZ,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;UAA3D;QAAX,CAA5D,CAArB;;QACA,IAAIM,IAAI,CAACS,MAAT,EAAiB;UACf,KAAKK,KAAL,CAAW,SAAX,EAAsBd,IAAI,CAACe,OAA3B,EAAoC,SAApC;UACA,KAAKjB,SAAL;QACF,CAHA,MAGO;UACL,KAAKgB,KAAL,CAAW,OAAX,EAAoB,mCAApB,EAAyD,OAAzD;QACF;MACF,CARA,CAQE,OAAMP,CAAN,EAAS;QAET,IAAIA,CAAC,CAACC,QAAF,CAAWC,MAAX,IAAqB,GAAzB,EAA8B;UAC5BhB,YAAY,CAACiB,UAAb,CAAwB,OAAxB;UACA,KAAKf,OAAL,CAAaC,IAAb,CAAkB,GAAlB;QACF;MACF;IACD,CA5BM;;IA6BP,MAAMoB,QAAN,CAAeJ,EAAf,EAAmB;MACjB,KAAKjB,OAAL,CAAaC,IAAb,CAAkB;QAAEqB,IAAI,EAAE,UAAR;QAAoBC,MAAM,EAAE;UAACN,EAAE,EAAEA;QAAL;MAA5B,CAAlB;IACD,CA/BM;;IAgCPO,GAAG,GAAG;MACJ,KAAKxB,OAAL,CAAaC,IAAb,CAAkB;QAACqB,IAAI,EAAE;MAAP,CAAlB;IACF;;EAlCO,CATI;;EA6CbjB,IAAI,GAAG;IACL,OAAO;MACLM,KAAK,EAAE;IADF,CAAP;EAGD;;AAjDY,CAAf","names":["axios","created","localStorage","getItem","$router","push","mounted","fetchData","methods","data","get","process","env","VUE_APP_BASE_API","headers","tasks","e","response","status","removeItem","deleteTask","id","delete","$swal","message","editTask","name","params","add"],"sourceRoot":"","sources":["/Users/sairamvaddireddy/Documents/Sites/vue-todo/src/views/Tasks/todo-index.vue"],"sourcesContent":["<template>\n  <div class=\"w-50 m-auto\">\n    <div>\n      <h1>Tasks</h1>\n      <button class=\"float-end btn btn-primary\" @click=\"add\">Add</button>\n    </div>\n    <table class=\"table table-striped\">\n      <thead class=\"thead-dark\">\n        <th>ID</th>\n        <th>Name</th>\n        <th>Actions</th>\n      </thead>\n      <tbody>\n        <tr v-for=\"task in tasks\" :key=\"task.id\">\n          <td>{{ task.id }}</td>\n          <td>{{ task.name }}</td>\n          <td>\n            <button @click=\"editTask(task.id)\" class=\"btn btn-warning btn-sm\">Edit</button>\n            <button @click=\"deleteTask(task.id)\" class=\"btn btn-danger btn-sm\">Delete</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n<script>\nimport axios from 'axios';\nexport default {\n  created() {\n    if (!localStorage.getItem('token')) {\n      this.$router.push('/');\n    }\n  },\n  mounted() {\n    this.fetchData();\n  },\n  methods: {\n    async fetchData() {\n      try {\n        const {data} = await axios.get(`${process.env.VUE_APP_BASE_API}/tasks`, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('token')}`} });\n        this.tasks = data.tasks.data;\n      } catch(e) {\n        if (e.response.status == 401) {\n          localStorage.removeItem('token');\n          this.$router.push('/');\n        }\n      }\n    },\n    async deleteTask(id) {\n      try {\n        const {data} = await axios.delete(`${process.env.VUE_APP_BASE_API}/tasks/${id}`, { headers: {\"Authorization\" : `Bearer ${localStorage.getItem('token')}`} });\n        if (data.status) {\n          this.$swal('success', data.message, 'success');\n          this.fetchData();\n        } else {\n          this.$swal('oops!', 'something went wrong! try again!!', 'error');\n        }\n      } catch(e) {\n\n        if (e.response.status == 401) {\n          localStorage.removeItem('token');\n          this.$router.push('/');\n        }\n      }\n    },\n    async editTask(id) {\n      this.$router.push({ name: 'editTask', params: {id: id}});\n    },\n    add() {\n      this.$router.push({name: 'addTask'});\n    }\n  },\n  data() {\n    return {\n      tasks: {}\n    }\n  },\n\n\n}\n</script>"]},"metadata":{},"sourceType":"module"}